openapi: "3.0.0"
info:
  title: Examples
  version: 1.2.3
paths:
  /example:
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PropertyLevelExample"
      responses:
        "200":
          description: OK
          headers:
            Location:
              description: Location description
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ObjectLevelExample'
              example: 
                id: 12
                name: Paul Smith
        "500":
          description: ERROR
          content:
            application/json:
              schema:
                type: string
                example: Internal Server Error

  /examples:
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ObjectLevelExample'
            examples:
              Jessica:
                value:
                  id: 10
                  name: Jessica Smith
              Ron:
                value:
                  id: 11
                  name: Ron Stewart
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReusedExample"
              examples:
                unregistered:
                  $ref: "#/components/examples/resp_create_prospect"
                registered:
                  $ref: "#/components/examples/resp_verify_pin"

components:
  schemas:
    PropertyLevelExample:
      type: object
      properties:
        response:
          type: string
          example: "[{\"assertions\":[{\"assertionScheme\":\"test\"}]}]"
        responseCode:
          type: integer
          example: 1200
        responseMsg:
          type: string
          example: Completed
    ReusedExample:
      properties:
        authId:
          type: string
        nextStages:
          type: array
          items:
            type: string
            enum: [create_prospect, verify_pin]
    ObjectLevelExample:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string

  examples:
    resp_create_prospect:
      value:
        authId: string
        nextStages:
            - create_prospect
    resp_verify_pin:
      value:
        authId: string
        nextStages:
            - verify_pin
